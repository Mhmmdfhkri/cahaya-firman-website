<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
    <title>Cahaya Firman</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/CheckoutUI.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body style="background-color: #D4D8F0;">

  <div class="d-flex flex-row bg-white shadow fixed-top">
    <div class="p-2" ><img src="{{ url_for('static', filename='asset/mingcute_left-line.png') }}" alt="arrow" class="arrow-left"> </img></div>
    <div class="p-2"><img src="{{ url_for('static', filename='asset/logo.png') }}" alt="logo" class="Logo-Img"></div>
    <div class="p-2"><div class="d-flex" style="height: 80px; color: black;">
      <div class="vr"></div>
    </div></div>
    <div class="p-2"> <h1 class="topnav-hd">Checkout Belanja</h1></div>
  </div>
  

 <div class="container bg-light rounded-4 top_content">
  <h3 class="ur-address">Alamat Anda</h3>
  <div class="d-flex bd-highlight mb-0">
    {% if order_items %}
  <div class="me-auto p-2 bd-highlight"><p class="user-name">{{ order_items[0].session.user.fullname }}</p></div>
{% endif %}
    <div class="align-self-end"><p class ="ch-address">UBAH ALAMAT</p></div>
    <div class="align-self-start" ><img src="{{ url_for('static', filename='asset/ep_success-filled.png') }}" alt="check" class="success-img"></div>
  </div>
  {% if order_items %}
  <p class="user-address">{{ order_items[0].session.user.address }}</p>
  {% endif %}
 </div>


<div class="container mt-5 p-3 bg-light rounded-4">
  <div class="d-flex bd-highlight mb-3">
    <div class="me-auto p-2 bd-highlight"><h3>Produk</h3></div>
    <div class="p-2 bd-highlight"><H3>Harga Satuan</H3></div>
    <div class="p-2 bd-highlight"><H3>Kuantitas</H3></div>
    <div class="p-2 bd-highlight"><H3>Total Harga</H3></div>
  </div>
  {% for order_item in order_items %}
  <div class=".container m-3 bg-light rounded-3 shadow-lg">
    <div class="d-flex bd-highlight mb-3">
      <div class="p-2 bd-highlight"><img src="{{ url_for('static', filename='unggah/' + order_item.product.picture) }}" alt="item" class="item-img"></div>
      <div class="me-auto py-5 bd-highlight">
        <div class="col-offset-1"><p class="item-name">{{ order_item.product.name }}</p></div>
        <div class='col-offset-1'><p class="item-stock">Stok: {{ order_item.product.quantityInStock }}</p></div>
      </div>
      <div class="p-2 me-5 bd-highlight align-self-center"><p class="item-price">{{ order_item.product.price }}</p></div>
      <div class="p-2 me-5 bd-highlight align-self-center"><div class="row align-items-center">
        <div class="col">
          <form  method="POST" action="{{ url_for('update_checkout', id_order_item=order_item.id_order_item)}}" >
            <button type="submit" name="minus" class="btn btn-light">
          <img src="{{ url_for('static', filename='asset/ic_baseline-plus.png') }}" alt="min" class="min-item">
            </button>
        </form>
        </div>
        <div class="col">
          {{ order_item.quantity }}
        </div>
        <div class="col">
          <form  method="POST" action="{{ url_for('update_checkout', id_order_item=order_item.id_order_item)}}">
            <button type="submit" name="plus" class="btn btn-light">
          <img src="{{ url_for('static', filename='asset/ic_baseline-plus (1).png') }}" alt="add" class="add-item">
            </button>
        </form>
        </div>
      </div></div>
      <div class="p-2 me-5 bd-highlight align-self-center"><p class="total-item-price">{{ order_item.quantity * order_item.product.price }}</p></div>
    </div>
  </div>
  {% endfor %}
</div>

<div class="container mt-5 p-1 bg-light rounded-4">
  <div class="d-flex bd-highlight mb-3">
    <div class="p-2 bd-highlight"> <img src="{{ url_for('static', filename='asset/Group.png') }}" alt="dollar sign" class="dollar-sign"></div>
    <div class="me-auto p-0 bd-highlight align-self-end"><p class="tv-payment">Metode Pembayaran</p></div>
    <div class="p-0 bd-highlight align-self-end"><p class ="payment-method">Pilih Metode Pembayaran</p></div>
    <div class="p-0 bd-highlight align-self-end "> <img src="{{ url_for('static', filename='asset/mingcute_down-line.png') }}" alt="drop sign" class="drop-sign"></div>
  </div>
</div>


{% set SubPengiriman = 20000 %}
{% set layanan = 1000 %}
{% set Penanganan = 1000 %}
<div class="container mt-5 p-1 bg-light rounded-4 bottom_content">
  <div class="d-flex bd-highlight">
    <div class="p-2 bd-highlight"> <img src="{{ url_for('static', filename='asset/fluent-mdl2_product-list.png') }}" alt="box sign" class="box-sign"></div>
    <div class="me-auto p-0 bd-highlight align-self-end"><p class="detail-payment">Rincian Pembayaran</p></div>
  </div>
  <div class="row ps-4 pe-4">
    <div class="col">
      <p class="Subtotal">Subtotal Untuk Produk</p>
    </div>
    <div class="col-md-auto">
      <p class="Subtotal-Product">Rp{{ total_price }}</p>
    </div>  
  </div>
  <div class="row ps-4 pe-4">
    <div class="col">
      <p class="Subtotal">Subtotal Untuk Pengiriman</p>
    </div>
    <div class="col-md-auto">
      <p class="Subtotal-delivery">Rp{{ SubPengiriman }}</p>
    </div>  
  </div>
  <div class="row ps-4 pe-4">
    <div class="col">
      <p class="Subtotal">Biaya Layanan</p>
    </div>
    <div class="col-md-auto">
      <p class="service-fee">Rp{{ layanan }}</p>
    </div>  
  </div>
  <div class="row ps-4 pe-4">
    <div class="col">
      <p class="Subtotal">Biaya Penanganan</p>
    </div>
    <div class="col-md-auto">
      <p class="handling-fee">Rp{{ Penanganan }}</p>
    </div>  
  </div>
  <div class="row ps-4 pe-4">
    <div class="col">
      <p class="tvTotal-pay">Total Pembayaran</p>
    </div>
    <div class="col-md-auto">
      <p class="Total-pay">Rp{{ total_price + SubPengiriman + layanan + Penanganan }}</p>
    </div>  
  </div>
</div>

<nav class="navbar bg-light fixed-bottom shadow">
  <div class="container-fluid">
    <div class="bd-highlight car_signF ms-3"><img src="{{ url_for('static', filename='asset/pngwing 5.png') }}" alt="wing" class="car-sign"></img></div>
    <div class="px-2 d-flex ms-auto"><p class="Total-payment">Total Pembayaran</p></div>
    <div class="d-flex" style="height: 80px;">
      <div class="vr bg-black"></div>
    </div>
    <div class="px-2 d-flex"> <p class="Total-pay2">{{ total_price + SubPengiriman + layanan + Penanganan }}</p></div>
    <form method="POST" action="{{ url_for('checkoutbt') }}">
    <button type="submit" class="btn btn-secondary btn-lg me-3 px-5 py-3 rounded-4 bt_checkout">Checkout Now</button>
  </form>
  </div>
</nav>




<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>
